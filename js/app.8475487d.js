(function(e){function t(t){for(var a,o,c=t[0],s=t[1],u=t[2],d=0,b=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&b.push(i[o][0]),i[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);l&&l(t);while(b.length)b.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"032a":function(e,t,n){"use strict";n("ebee")},"18fd":function(e,t,n){},3175:function(e,t,n){"use strict";n("f322")},"4ed6":function(e,t,n){"use strict";n("18fd")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),i={id:"container"};function r(e,t,n,r,o,c){var s=Object(a["B"])("router-view");return Object(a["t"])(),Object(a["f"])("div",i,[Object(a["i"])(s)])}var o={name:"App",components:{}},c=(n("032a"),n("d959")),s=n.n(c);const u=s()(o,[["render",r]]);var l=u,d=n("6c02"),b=["height","width"],h=["height","width"],g=["height","width"],f=["height","width"];function p(e,t,n,i,r,o){return Object(a["t"])(),Object(a["f"])("div",{id:"mapComponent",style:Object(a["p"])({height:"".concat(r.mapHeight,"px"),width:"".concat(r.mapWidth,"px")}),onMousemove:t[0]||(t[0]=function(){return o.onMouseMove&&o.onMouseMove.apply(o,arguments)}),onMouseout:t[1]||(t[1]=function(){return o.onMouseOut&&o.onMouseOut.apply(o,arguments)}),onClick:t[2]||(t[2]=function(){return o.onClick&&o.onClick.apply(o,arguments)})},[Object(a["g"])("canvas",{id:"hoverBuildingsCanvas",ref:"hoverBuildingsCanvas",height:r.mapHeight,width:r.mapWidth},null,8,b),Object(a["g"])("canvas",{id:"hoverInfluenceCanvas",ref:"hoverInfluenceCanvas",height:r.mapHeight,width:r.mapWidth},null,8,h),Object(a["g"])("canvas",{id:"buildingsCanvas",ref:"buildingsCanvas",height:r.mapHeight,width:r.mapWidth},null,8,g),Object(a["g"])("canvas",{id:"backgroundMap",ref:"backgroundMap",height:r.mapHeight,width:r.mapWidth},null,8,f)],36)}var v=n("3835"),m=(n("d81d"),n("159b"),n("d3b7"),n("25f0"),n("caad"),{TILE_SIZE:13,NUMBER_TILE_COL:56,NUMBER_TILE_ROW:32,PLAIN_ENV:0,FOREST_ENV:1,MOUNTAIN_ENV:2,LAKE_ENV:3,BEACH_ENV:4,PLAIN_COLORS:["#2CC32D","#1FC733","#11CB38","#12B844","#0EA44D"],FOREST_COLORS:["#1C6812","#0B6C0B","#03700D","#045D13","#024915"],MOUNTAIN_COLORS:["#858585","#848484","#838383","#797979","#6D6D6D"],LAKE_COLORS:["#2355F7","#1237FB","#0019FF","#030DEC","#0500D8"],BEACH_COLORS:["#F7EDCC","#FBEFBE","#FFF2AF","#ECE2A5","#D8D194"],INFLUENCE_COLOR:"#FFCE00",NOT_ALLOWED_COLOR:"#DC0005",INFLUENCE_RANGES:{TownCenter:7,Manor:3,House:4,Market:6,Theater:4,Park:3,Lumberjacks:6,Mines:6,Harbour:4,Tavern:4,Farm:4,Fields:4},SIZE_BUILDING:{TownCenter:[1,1],Manor:[2,2],House:[2,3],Market:[4,5],Theater:[4,4],Park:[1,1],Lumberjacks:[4,4],Mines:[4,4],Harbour:[3,2],Tavern:[2,2],Farm:[2,2],Fields:[4,2]},SRC_BUILDINGS_NBER_AVAILABLE_ROUND1:{TownCenter:1,Manor:2,House:4,Market:1,Theater:0,Park:2,Lumberjacks:0,Mines:0,Harbour:1,Tavern:0,Farm:0,Fields:0},SRC_BUILDINGS_NBER_AVAILABLE_ROUND2:{TownCenter:0,Manor:4,House:3,Market:0,Theater:1,Park:0,Lumberjacks:1,Mines:1,Harbour:1,Tavern:2,Farm:2,Fields:1},SRC_BUILDINGS_NBER_AVAILABLE_ROUND3:{TownCenter:1,Manor:4,House:4,Market:1,Theater:1,Park:3,Lumberjacks:2,Mines:2,Harbour:1,Tavern:2,Farm:2,Fields:2},SRC_BUILDINGS:{TownCenter:"town-center.png",Manor:"manor.png",House:"houses.png",Market:"market.png",Theater:"theater.png",Park:"park.png",Lumberjacks:"lumberjack.png",Mines:"mines.png",Harbour:"harbour.png",Tavern:"tavern.png",Farm:"farm.png",Fields:"fields.png"},SCORE_BUILDINGS:{TownCenter:{TownCenter:-20,Manor:5,House:2,Market:10,Theater:7,Park:5,Lumberjacks:-15,Mines:-20,Harbour:10,Tavern:10,Farm:-15,Fields:-20},Manor:{TownCenter:5,Manor:3,House:-1,Market:-3,Theater:3,Park:2,Lumberjacks:-20,Mines:-20,Harbour:-5,Tavern:-2,Farm:-20,Fields:-20},House:{TownCenter:2,Manor:1,House:1,Market:2,Theater:0,Park:1,Lumberjacks:-5,Mines:1,Harbour:2,Tavern:4,Farm:-5,Fields:-10},Market:{TownCenter:10,Manor:3,House:2,Market:-20,Theater:0,Park:0,Lumberjacks:2,Mines:2,Harbour:5,Tavern:1,Farm:2,Fields:0},Theater:{TownCenter:7,Manor:4,House:2,Market:0,Theater:-15,Park:3,Lumberjacks:-15,Mines:-15,Harbour:0,Tavern:2,Farm:0,Fields:-10},Park:{TownCenter:5,Manor:3,House:2,Market:0,Theater:0,Park:2,Lumberjacks:-5,Mines:-15,Harbour:0,Tavern:2,Farm:0,Fields:0},Lumberjacks:{TownCenter:-15,Manor:0,House:0,Market:5,Theater:0,Park:5,Lumberjacks:-5,Mines:2,Harbour:4,Tavern:0,Farm:10,Fields:0},Mines:{TownCenter:-5,Manor:0,House:0,Market:5,Theater:0,Park:0,Lumberjacks:3,Mines:0,Harbour:2,Tavern:0,Farm:10,Fields:0},Harbour:{TownCenter:10,Manor:0,House:1,Market:10,Theater:0,Park:0,Lumberjacks:4,Mines:0,Harbour:5,Tavern:5,Farm:0,Fields:0},Tavern:{TownCenter:10,Manor:2,House:4,Market:5,Theater:5,Park:0,Lumberjacks:2,Mines:2,Harbour:5,Tavern:-5,Farm:1,Fields:0},Farm:{TownCenter:-15,Manor:0,House:0,Market:0,Theater:0,Park:0,Lumberjacks:5,Mines:0,Harbour:0,Tavern:1,Farm:-5,Fields:0},Fields:{TownCenter:-15,Manor:0,House:0,Market:0,Theater:0,Park:0,Lumberjacks:0,Mines:0,Harbour:0,Tavern:0,Farm:5,Fields:5}},SCORE_ENV:{plain:{TownCenter:0,Manor:0,House:0,Market:0,Theater:0,Park:2,Lumberjacks:0,Mines:-10,Harbour:"notAllowed",Tavern:0,Farm:10,Fields:0},forest:{TownCenter:-10,Manor:0,House:0,Market:-10,Theater:-10,Park:5,Lumberjacks:20,Mines:-15,Harbour:"notAllowed",Tavern:0,Farm:0,Fields:0},mountain:{TownCenter:-10,Manor:-5,House:-5,Market:-10,Theater:-10,Park:-5,Lumberjacks:-5,Mines:20,Harbour:"notAllowed",Tavern:5,Farm:-10,Fields:-20},beach:{TownCenter:"notAllowed",Manor:"notAllowed",House:"notAllowed",Market:"notAllowed",Theater:"notAllowed",Park:"notAllowed",Lumberjacks:"notAllowed",Mines:"notAllowed",Harbour:15,Tavern:"notAllowed",Farm:"notAllowed",Fields:"notAllowed"},water:{TownCenter:"notAllowed",Manor:"notAllowed",House:"notAllowed",Market:"notAllowed",Theater:"notAllowed",Park:"notAllowed",Lumberjacks:"notAllowed",Mines:"notAllowed",Harbour:"notAllowed",Tavern:"notAllowed",Farm:"notAllowed",Fields:"notAllowed"}}}),O=m,C={buildings:[]},j={name:"Map",props:{map:Array,typeSelected:String},emits:["changeTotalScore"],data:function(){return{mapWidth:O.TILE_SIZE*O.NUMBER_TILE_COL,mapHeight:O.TILE_SIZE*O.NUMBER_TILE_ROW,totalScore:0,score:0}},mounted:function(){this.buildMap(this.map),this.initBuildings()},methods:{initBuildings:function(){for(var e=[],t=0;t<O.NUMBER_TILE_ROW;t++){for(var n=[],a=0;a<O.NUMBER_TILE_COL;a++)n.push({id:"none",type:"none"});e.push(n)}C.buildings=e},buildMap:function(e){var t=this,n=this.$refs["backgroundMap"],a=n.getContext("2d");e.forEach((function(e,n){e.forEach((function(e,i){var r=Math.ceil(1),o=Math.floor(3),c=Math.floor(Math.random()*(o-r+1))+r,s=t.pickColorPool(e);t.drawRectOnCanvas(i,n,s[c],a)}))}))},onMouseOut:function(){var e=this.$refs["hoverInfluenceCanvas"],t=this.$refs["hoverBuildingsCanvas"],n=e.getContext("2d"),a=t.getContext("2d");n.clearRect(0,0,this.mapWidth,this.mapHeight),a.clearRect(0,0,this.mapWidth,this.mapHeight)},onMouseMove:function(e){var t=this;if(this.clearHoverCanvas(),"None"!==this.typeSelected){var n=this.$refs["hoverInfluenceCanvas"].getBoundingClientRect(),a=Math.floor((e.clientY-n.top)/O.TILE_SIZE),i=Math.floor((e.clientX-n.left)/O.TILE_SIZE);a<0?a=0:a>=O.NUMBER_TILE_ROW&&(a=O.NUMBER_TILE_ROW-1),i<0?i=0:i>=O.NUMBER_TILE_COL&&(i=O.NUMBER_TILE_COL-1);var r=this.$refs["hoverInfluenceCanvas"],o=r.getContext("2d"),c=this.$refs["hoverBuildingsCanvas"],s=c.getContext("2d"),u=this.typeSelected,l=this.computeInfluenceSphere(i,a,u),d=O.INFLUENCE_COLOR,b=this.canBeBuild(i,a,u,C.buildings);b||(d=O.NOT_ALLOWED_COLOR),l.forEach((function(e){t.drawRectOnCanvas(e[0],e[1],d,o)})),this.score=b?this.computeScore(i,a,u,C.buildings):"",this.drawScoreOnCanvas(i,a,this.score,u,s),this.drawBuildingOnCanvas(i,a,u,s)}},onClick:function(e){if("None"!==this.typeSelected){var t=this.$refs["hoverBuildingsCanvas"].getBoundingClientRect(),n=Math.floor((e.clientY-t.top)/O.TILE_SIZE),a=Math.floor((e.clientX-t.left)/O.TILE_SIZE);n<0?n=0:n>=O.NUMBER_TILE_ROW&&(n=O.NUMBER_TILE_ROW-1),a<0?a=0:a>=O.NUMBER_TILE_COL-1&&(a=O.NUMBER_TILE_COL-2);var i=this.typeSelected;if(this.canBeBuild(a,n,i,C.buildings)){this.setBuilding(a,n,i,C.buildings);var r=this.$refs["buildingsCanvas"],o=r.getContext("2d");this.drawBuildingOnCanvas(a,n,i,o),this.totalScore+=this.score,this.$emit("changeTotalScore",{totalScore:this.totalScore})}}},clearHoverCanvas:function(){var e=this.$refs["hoverInfluenceCanvas"],t=e.getContext("2d"),n=this.$refs["hoverBuildingsCanvas"],a=n.getContext("2d");t.clearRect(0,0,this.mapWidth,this.mapHeight),a.clearRect(0,0,this.mapWidth,this.mapHeight)},canBeBuild:function(e,t,n,a){var i=this.getEnvBuilding(e,t,n),r=this.getEnvScore(i,n);if("notAllowed"===r)return!1;for(var o=this.getSizeBuilding(n),c=o[1],s=o[0],u=0;u<c;u++)for(var l=0;l<s;l++)if("none"!==a[t+l][e+u].id)return!1;return!0},computeNextId:function(e){var t=0;return e.forEach((function(e){e.forEach((function(e){e.id>=t&&(t=e.id+1)}))})),t},setBuilding:function(e,t,n,a){for(var i=this.getSizeBuilding(n),r=i[1],o=i[0],c=this.computeNextId(a),s=0;s<r;s++)for(var u=0;u<o;u++)a[t+u][e+s]={id:c,type:n}},pickColorPool:function(e){var t;switch(e){case O.PLAIN_ENV:t=O.PLAIN_COLORS;break;case O.FOREST_ENV:t=O.FOREST_COLORS;break;case O.MOUNTAIN_ENV:t=O.MOUNTAIN_COLORS;break;case O.BEACH_ENV:t=O.BEACH_COLORS;break;case O.LAKE_ENV:t=O.LAKE_COLORS;break;default:t=O.PLAIN_COLORS}return t},drawBuildingOnCanvas:function(e,t,n,a){var i=this.getBuildingImageSource(n),r=this.getSizeBuilding(n),o=r[1]*O.TILE_SIZE,c=r[0]*O.TILE_SIZE,s=new Image(o,c);s.src="buildings/".concat(i),a.drawImage(s,e*O.TILE_SIZE,t*O.TILE_SIZE,o,c)},drawRectOnCanvas:function(e,t,n,a){a.fillStyle=n,a.fillRect(e*O.TILE_SIZE,t*O.TILE_SIZE,O.TILE_SIZE,O.TILE_SIZE)},drawScoreOnCanvas:function(e,t,n,a,i){i.font="20px Slackey",i.fillStyle="black";var r=this.getSizeBuilding(a),o=r[1],c=r[0],s=this.computeBuildingCenter(e,t,o,c),u=Object(v["a"])(s,2),l=u[0],d=u[1],b=e-o/2-1,h=d+1;l<o+1&&(b=l,h=t-.5),t<c+1&&l<o+1&&(b=e+o+.5,h=t+c+.5),i.fillText(n.toString(),b*O.TILE_SIZE,h*O.TILE_SIZE)},computeDist:function(e,t){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},computeBuildingCenter:function(e,t,n,a){var i=t+(a-1)/2,r=e+(n-1)/2;return[r,i]},computeInfluenceSphere:function(e,t,n){for(var a=this.getSizeBuilding(n),i=a[1],r=a[0],o=this.computeBuildingCenter(e,t,i,r),c=Object(v["a"])(o,2),s=c[0],u=c[1],l=O.INFLUENCE_RANGES[n],d=[],b=0;b<l;b++)for(var h=0;h<l;h++){var g=this.computeDist(b,h);g<l&&(d.push([s+h,u+b]),d.push([s-h,u-b]),d.push([s+h,u-b]),d.push([s-h,u+b]))}return d},getBuildingImageSource:function(e){return O.SRC_BUILDINGS[e]},getSizeBuilding:function(e){return O.SIZE_BUILDING[e]},getEnvScore:function(e,t){return O.SCORE_ENV[e][t]},getEnv:function(e,t){var n;switch(this.map[t][e]){case O.PLAIN_ENV:n="plain";break;case O.FOREST_ENV:n="forest";break;case O.MOUNTAIN_ENV:n="mountain";break;case O.BEACH_ENV:n="beach";break;case O.LAKE_ENV:n="water";break;default:n="plain"}return n},getEnvBuilding:function(e,t,n){for(var a,i=[],r=this.getSizeBuilding(n),o=r[1],c=r[0],s=0;s<o;s++)for(var u=0;u<c;u++)i.push(this.getEnv(e+s,t+u));return i.includes("plain")&&(a="plain"),i.includes("forest")&&(a="forest"),i.includes("mountain")&&(a="mountain"),i.includes("beach")&&(a="beach"),i.includes("water")&&(a="water"),"Harbour"===n&&i.forEach((function(e){"beach"!==e&&(a="plain")})),a},computeScore:function(e,t,n,a){var i=this,r=this.getEnvBuilding(e,t,n),o=O.INFLUENCE_RANGES[n],c=[],s=this.getSizeBuilding(n),u=s[1],l=s[0],d=this.computeBuildingCenter(e,t,u,l),b=Object(v["a"])(d,2),h=b[0],g=b[1],f=this.getEnvScore(r,n);return"notAllowed"===f?f="":a.forEach((function(e,t){e.forEach((function(e,a){var r=Math.abs(g-t),s=Math.abs(h-a),u=i.computeDist(r,s);if(u<o&&!c.includes(e.id)&&"none"!==e.id){c.push(e.id);var l=O.SCORE_BUILDINGS[n][e.type];f+=l}}))})),f}}};n("de8d");const E=s()(j,[["render",p]]);var S=E,M={key:0,class:"LoadingContainer"},k={key:1,class:"LoadingContainer"},B={key:2,id:"playContainer",ref:"playContainer"},I={class:"buttons"};function T(e,t,n,i,r,o){var c=Object(a["B"])("Loading"),s=Object(a["B"])("Map"),u=Object(a["B"])("InGameButton"),l=Object(a["B"])("SurrenderButton"),d=Object(a["B"])("ScoreBar");return Object(a["t"])(),Object(a["f"])(a["a"],null,[this.dataMap.length<1?(Object(a["t"])(),Object(a["f"])("div",M,[Object(a["i"])(c)])):Object(a["e"])("",!0),this.dataMap.length<1?(Object(a["t"])(),Object(a["f"])("div",k," Chargement de la map en cours... ")):Object(a["e"])("",!0),this.dataMap.length>=1?(Object(a["t"])(),Object(a["f"])("div",B,[Object(a["i"])(s,{map:r.dataMap,onChangeTotalScore:o.onChangeTotalScore,typeSelected:r.buildingType},null,8,["map","onChangeTotalScore","typeSelected"]),Object(a["g"])("div",I,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(r.buildings,(function(e,t){return Object(a["t"])(),Object(a["d"])(u,{key:t,buildingName:t,numberAvailable:e,onOnChangeButtonClick:o.onChangeButtonClick},null,8,["buildingName","numberAvailable","onOnChangeButtonClick"])})),128)),Object(a["i"])(l,{totalScore:this.totalScore,"end-game":this.endGame},null,8,["totalScore","end-game"]),Object(a["i"])(d,{totalScore:this.totalScore},null,8,["totalScore"])])],512)):Object(a["e"])("",!0)],64)}n("07ac");var _=n("d4ec"),L=n("bee2"),N=n("262e"),w=n("2caf"),R=n("bc3a"),A=n.n(R),y="https://minimalist-city-builder-server.herokuapp.com",H=function(){function e(){Object(_["a"])(this,e)}return Object(L["a"])(e,null,[{key:"buildPath",value:function(){return y}},{key:"getHttp",value:function(e){return A.a.get(this.buildPath()+e)}},{key:"postHttp",value:function(e,t){return A.a.post(this.buildPath()+e,t)}},{key:"putHttp",value:function(e,t){return A.a.put(this.buildPath()+e,t)}},{key:"deleteHttp",value:function(e,t){return A.a.delete(this.buildPath()+e,{data:t})}}]),e}(),F={generate:"/generate"},P=function(e){Object(N["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(_["a"])(this,n),t.apply(this,arguments)}return Object(L["a"])(n,null,[{key:"generateMap",value:function(e,t){this.getHttp(F.generate).then(e).catch(t)}}]),n}(H),U=function(e){return Object(a["w"])("data-v-7db43c97"),e=e(),Object(a["u"])(),e},D={class:"item"},G=U((function(){return Object(a["g"])("i",{class:"loader --7"},null,-1)})),V=[G];function x(e,t,n,i,r,o){return Object(a["t"])(),Object(a["f"])("div",D,V)}var W={name:"Loading.vue"};n("6102");const Z=s()(W,[["render",x],["__scopeId","data-v-7db43c97"]]);var $=Z,z=["disabled"],J={class:"containerImage"},K=["src"],X={class:"buildingNumber"},Y={class:"number"};function q(e,t,n,i,r,o){return Object(a["t"])(),Object(a["f"])("button",{class:Object(a["o"])(["containerButton",[{containerButtonSelected:this.isActive[this.buildingName]&&this.numberAvailable>0}]]),onClick:t[0]||(t[0]=function(){return o.onClick&&o.onClick.apply(o,arguments)}),disabled:this.numberAvailable<1},[Object(a["g"])("div",J,[Object(a["g"])("img",{class:"imageBuilding",src:"icons/".concat(o.getBuildingImageSource(this.buildingName)),alt:"Building"},null,8,K)]),Object(a["g"])("div",X,[Object(a["g"])("div",Y,Object(a["D"])(this.numberAvailable),1)])],10,z)}n("fd87"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7");var Q=JSON.parse(JSON.stringify(O.SRC_BUILDINGS)),ee={name:"InGameButton.vue",props:{buildingName:String,numberAvailable:Int8Array},data:function(){for(var e in Q)Q[e]=!1;return{buildingSelected:"",isActive:Q}},methods:{getBuildingImageSource:function(e){return O.SRC_BUILDINGS[e]},onClick:function(){for(var e in this.isActive)this.isActive[e]=!1;this.numberAvailable>=1&&(this.isActive[this.buildingName]=!this.isActive[this.buildingName]),this.$emit("onChangeButtonClick",{buildingName:this.buildingName}),this.buildingSelected=this.buildingName}}};n("e747");const te=s()(ee,[["render",q],["__scopeId","data-v-17598363"]]);var ne=te,ae={id:"ScoreBar"};function ie(e,t,n,i,r,o){return Object(a["t"])(),Object(a["f"])("div",ae,[Object(a["h"])(" Score : "+Object(a["D"])(n.totalScore)+" ",1),Object(a["g"])("div",{id:"scoreChange",class:Object(a["o"])([{visible:this.isScoreChangeVisible},{hidden:!this.isScoreChangeVisible||this.endGame},{positive:this.scoreChange>=0},{negative:this.scoreChange<0}])},Object(a["D"])(this.scoreChange),3)])}n("a9e3");var re={name:"ScoreBar.vue",props:{totalScore:Number,endGame:Boolean},data:function(){return{scoreChange:0,isScoreChangeVisible:!1}},watch:{totalScore:function(e,t){var n=this;this.scoreChange=e-t,this.isScoreChangeVisible=!0,setTimeout((function(){n.isScoreChangeVisible=!1}),2e3)}}};n("cfc2");const oe=s()(re,[["render",ie],["__scopeId","data-v-7755ca54"]]);var ce=oe,se={class:"containerImage"},ue=["src"];function le(e,t,n,i,r,o){var c=Object(a["B"])("Modal");return Object(a["t"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("button",{type:"button",class:"containerButton",onClick:t[0]||(t[0]=function(){return o.showModal&&o.showModal.apply(o,arguments)})},[Object(a["g"])("div",se,[Object(a["g"])("img",{class:"surrenderButton",src:"icons/surrender.png",alt:"Building"},null,8,ue)])]),Object(a["J"])(Object(a["i"])(c,{onClose:o.closeModal,score:this.totalScore,"end-game":this.endGame},null,8,["onClose","score","end-game"]),[[a["G"],r.isModalVisible]])],64)}var de={class:"modal-backdrop"},be={class:"modal"},he={class:"modal-header"},ge={class:"modal-body"},fe={class:"modal-body"},pe=Object(a["g"])("div",{id:"username"}," Username ",-1),ve={class:"modal-body"};function me(e,t,n,i,r,o){var c=this,s=Object(a["B"])("ScoreBar");return Object(a["t"])(),Object(a["f"])("div",de,[Object(a["g"])("div",be,[Object(a["g"])("header",he,[Object(a["g"])("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=function(){return o.close&&o.close.apply(o,arguments)})}," x ")]),Object(a["g"])("section",ge,[Object(a["A"])(e.$slots,"body",{},(function(){return[Object(a["i"])(s,{totalScore:c.score,endGame:c.endGame},null,8,["totalScore","endGame"])]}))]),Object(a["g"])("section",fe,[Object(a["A"])(e.$slots,"body",{},(function(){return[pe,Object(a["J"])(Object(a["g"])("input",{type:"text",id:"inputUsername",name:"Username",onKeyup:t[1]||(t[1]=function(){return o.updateUsername&&o.updateUsername.apply(o,arguments)}),"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.userName=t})},null,544),[[a["F"],e.userName]])]}))]),Object(a["g"])("footer",ve,[Object(a["g"])("button",{type:"button",id:"btn-valider",onClick:t[3]||(t[3]=function(){return o.postRankings&&o.postRankings.apply(o,arguments)})}," Valider ")])])])}var Oe={ranking:"/",postRanking:"/insertClassement"},Ce=function(e){Object(N["a"])(n,e);var t=Object(w["a"])(n);function n(){return Object(_["a"])(this,n),t.apply(this,arguments)}return Object(L["a"])(n,null,[{key:"getRankingData",value:function(e,t){this.getHttp(Oe.ranking).then(e).catch(t)}},{key:"postRankingData",value:function(e,t,n,a){this.postHttp(Oe.postRanking,{username:e,score:t}).then(n).catch(a)}}]),n}(H),je={name:"Modal",props:{score:Number,endGame:Boolean},components:{ScoreBar:ce},mounted:function(){document.getElementById("btn-valider").disabled=!0},methods:{close:function(){this.$emit("close")},postRankings:function(e){var t=this;e.preventDefault();var n=function(){t.close(),location.pathname="/"},a=function(e){console.log(e)},i=document.getElementById("inputUsername").value;Ce.postRankingData(i,this.score,n,a)},updateUsername:function(){var e=document.getElementById("inputUsername").value,t=document.getElementById("btn-valider");t.disabled=""===e}}};n("4ed6");const Ee=s()(je,[["render",me]]);var Se=Ee,Me={name:"App",props:{totalScore:Number,endGame:Boolean},components:{Modal:Se},data:function(){return{isModalVisible:!1,score:this.totalScore}},methods:{showModal:function(){this.isModalVisible=!0},closeModal:function(){this.isModalVisible=!1}},watch:{endGame:function(){!0===this.endGame&&this.showModal()}}};n("d4c2");const ke=s()(Me,[["render",le],["__scopeId","data-v-b4582d0c"]]);var Be=ke,Ie=window.innerHeight/(O.NUMBER_TILE_ROW*O.TILE_SIZE+300),Te={name:"Play.vue",components:{InGameButton:ne,Loading:$,Map:S,ScoreBar:ce,SurrenderButton:Be},methods:{onChangeTotalScore:function(e){this.totalScore=e.totalScore,this.buildings[this.buildingType]=this.buildings[this.buildingType]-1,this.buildings[this.buildingType]<1&&(this.buildingType="None");var t=function(e){return Object.values(e).reduce((function(e,t){return e+t}))};0===t(this.buildings)?this.endGame=!0:this.endGame=!1},onChangeButtonClick:function(e){this.buildingType=e.buildingName},getScaleRatio:function(){return Ie}},data:function(){return{numberAvailable:[],dataMap:[],buildings:O.SRC_BUILDINGS_NBER_AVAILABLE_ROUND1,totalScore:0,buildingType:"None",round:1,endGame:!1}},mounted:function(){var e=this,t=function(t){e.dataMap=t.data},n=function(e){console.log(e)};P.generateMap(t,n)},watch:{totalScore:function(){if(this.totalScore>=30&&this.totalScore<50&&this.round<2){for(var e in this.buildings)this.buildings[e]+=O.SRC_BUILDINGS_NBER_AVAILABLE_ROUND2[e];this.round=2}if(this.score>=150&&this.round<3){for(var t in this.buildings)this.buildings[t]+=O.SRC_BUILDINGS_NBER_AVAILABLE_ROUND3[t];this.round=3}}}};n("ce83");const _e=s()(Te,[["render",T],["__scopeId","data-v-2d970720"]]);var Le=_e,Ne={id:"homeContainer"},we={id:"rankingContainer"};function Re(e,t,n,i,r,o){var c=Object(a["B"])("ButtonLink"),s=Object(a["B"])("Ranking");return Object(a["t"])(),Object(a["f"])("div",Ne,[Object(a["i"])(c),Object(a["g"])("div",we,[Object(a["i"])(s)])])}var Ae=Object(a["h"])(" JOUER ");function ye(e,t,n,i,r,o){var c=Object(a["B"])("router-link");return Object(a["t"])(),Object(a["d"])(c,{to:"/Play",id:"ButtonLink"},{default:Object(a["I"])((function(){return[Ae]})),_:1})}var He={name:"ButtonLink.vue"};n("7be4");const Fe=s()(He,[["render",ye],["__scopeId","data-v-13cd0a80"]]);var Pe=Fe,Ue=function(e){return Object(a["w"])("data-v-7eeb5a5a"),e=e(),Object(a["u"])(),e},De=Ue((function(){return Object(a["g"])("h1",null,"Classement",-1)})),Ge={id:"Table"},Ve=Ue((function(){return Object(a["g"])("thead",{id:"thead"},[Object(a["g"])("tr",{id:"titleTable"},[Object(a["g"])("th",{class:"contentTable"},"Rang"),Object(a["g"])("th",{class:"contentTitle"},"Joueur"),Object(a["g"])("th",{class:"contentTitle"},"Score")])],-1)})),xe={id:"lines"},We={class:"contentTable"},Ze={class:"contentTable"},$e={class:"contentTable"},ze={id:"pagination-container"};function Je(e,t,n,i,r,o){var c=this;return Object(a["t"])(),Object(a["f"])("div",null,[De,Object(a["g"])("table",Ge,[Ve,Object(a["g"])("tbody",xe,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.paginate(r.posts),(function(e,t){return Object(a["t"])(),Object(a["f"])("tr",{key:e[0]},[Object(a["g"])("td",We,Object(a["D"])(t+1+c.perPage*(c.page-1)),1),Object(a["g"])("td",Ze,Object(a["D"])(e[0]),1),Object(a["g"])("td",$e,Object(a["D"])(e[1]),1)])})),128))])]),Object(a["g"])("div",ze,[Object(a["g"])("button",{id:"previousButton",class:"pagination-button",onClick:t[0]||(t[0]=function(e){return r.page--})}," Previous "),Object(a["g"])("button",{id:"nextButton",class:"pagination-button",onClick:t[1]||(t[1]=function(e){return r.page++})}," Next ")])])}n("fb6a");var Ke={name:"Ranking.vue",methods:{setPages:function(){for(var e=Math.ceil(this.posts.length/this.perPage),t=1;t<=e;t++)this.pages.push(t)},paginate:function(e){var t=this.page,n=this.perPage,a=t*n-n,i=t*n;return e.slice(a,i)},setDisabledState:function(){1==this.page?document.getElementById("previousButton").disabled=!0:document.getElementById("previousButton").disabled=!1,this.page==this.pages.length?document.getElementById("nextButton").disabled=!0:document.getElementById("nextButton").disabled=!1}},computed:{displayedPosts:function(){return this.paginate(this.posts)}},data:function(){return{posts:[""],page:1,perPage:10,pages:[]}},watch:{page:function(){this.setDisabledState()}},mounted:function(){var e=this,t=function(t){e.posts=t.data,e.setPages(),e.setDisabledState()},n=function(e){console.log(e)};Ce.getRankingData(t,n)}};n("d040");const Xe=s()(Ke,[["render",Je],["__scopeId","data-v-7eeb5a5a"]]);var Ye=Xe,qe={name:"Home",components:{Ranking:Ye,ButtonLink:Pe},props:{msg:String}};n("3175");const Qe=s()(qe,[["render",Re],["__scopeId","data-v-126d9cbd"]]);var et=Qe,tt=[{path:"/",component:et},{path:"/Map",component:S},{path:"/Play",component:Le},{path:"/:pathMatch(.*)*",redirect:"/"}],nt=Object(d["a"])({history:Object(d["b"])(),routes:tt}),at=nt;Object(a["c"])(l).use(at).mount("#app")},6102:function(e,t,n){"use strict";n("ed8e")},"7be4":function(e,t,n){"use strict";n("86ad")},"86ad":function(e,t,n){},"8a96":function(e,t,n){},"9b66":function(e,t,n){},a83f:function(e,t,n){},ab42:function(e,t,n){},abc59:function(e,t,n){},ce83:function(e,t,n){"use strict";n("abc59")},cfc2:function(e,t,n){"use strict";n("fc7d")},d040:function(e,t,n){"use strict";n("ab42")},d4c2:function(e,t,n){"use strict";n("8a96")},de8d:function(e,t,n){"use strict";n("a83f")},e747:function(e,t,n){"use strict";n("9b66")},ebee:function(e,t,n){},ed8e:function(e,t,n){},f322:function(e,t,n){},fc7d:function(e,t,n){}});
//# sourceMappingURL=app.8475487d.js.map